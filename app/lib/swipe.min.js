function Swipe(k,c){function w(){g=d.children;B=g.length;2>g.length&&(c.continuous=!1);p.transitions&&(c.continuous&&3>g.length)&&(d.appendChild(g[0].cloneNode(!0)),d.appendChild(d.children[1].cloneNode(!0)),g=d.children);l=Array(g.length);e=k.getBoundingClientRect().width||k.offsetWidth;d.style.width=g.length*e+"px";for(var b=g.length;b--;){var q=g[b];q.style.width=e+"px";q.setAttribute("data-index",b);p.transitions&&(q.style.left=b*-e+"px",h(b,a>b?-e:a<b?e:0,0))}c.continuous&&p.transitions&&(h(i(a- 1),-e,0),h(i(a+1),e,0));p.transitions||(d.style.left=a*-e+"px");k.style.visibility="visible"}function x(){c.continuous?t(a+1):a<g.length-1&&t(a+1)}function i(b){return(g.length+b%g.length)%g.length}function t(b,q){if(a!=b){if(p.transitions){var f=Math.abs(a-b)/(a-b);if(c.continuous){var j=f,f=-l[i(b)]/e;f!==j&&(b=-f*g.length+b)}for(j=Math.abs(a-b)-1;j--;)h(i((b>a?b:a)-j-1),e*f,0);b=i(b);h(a,e*f,q||m);h(b,0,q||m);c.continuous&&h(i(b-f),-(e*f),0)}else{b=i(b);var k=a*-e,n=b*-e,r=q||m;if(r)var s=+new Date, t=setInterval(function(){var b=+new Date-s;b>r?(d.style.left=n+"px",u&&(y=setTimeout(x,u)),c.transitionEnd&&c.transitionEnd.call(event,a,g[a]),clearInterval(t)):d.style.left=(n-k)*(Math.floor(100*(b/r))/100)+k+"px"},4);else d.style.left=n+"px"}a=b;f=c.callback&&c.callback(a,g[a]);setTimeout(f||z,0)}}function h(b,a,c){n(b,a,c);l[b]=a}function n(b,a,c){if(b=(b=g[b])&&b.style)b.webkitTransitionDuration=b.MozTransitionDuration=b.msTransitionDuration=b.OTransitionDuration=b.transitionDuration=c+"ms",b.webkitTransform= "translate("+a+"px,0)translateZ(0)",b.msTransform=b.MozTransform=b.OTransform="translateX("+a+"px)"}function r(){u=0;clearTimeout(y)}var z=function(){},H=!!window.addEventListener,I="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,v;a:{v=document.createElement("swipe");var C=["transitionProperty","WebkitTransition","MozTransition","OTransition","msTransition"],D;for(D in C)if(void 0!==v.style[C[D]]){v=!0;break a}v=!1}var p={addEventListener:H,touch:I,transitions:v}; if(k){var d=k.children[0],g,l,e,B,c=c||{},a=parseInt(c.startSlide,10)||0,m=c.speed||300;c.continuous=void 0!==c.continuous?c.continuous:!0;var u=c.auto||0,y,E,F,G,f,A,s,j={handleEvent:function(b){switch(b.type){case "touchstart":this.start(b);break;case "touchmove":this.move(b);break;case "touchend":var a=this.end(b);setTimeout(a||z,0);break;case "webkitTransitionEnd":case "msTransitionEnd":case "oTransitionEnd":case "otransitionend":case "transitionend":a=this.transitionEnd(b);setTimeout(a||z,0); break;case "resize":setTimeout(w||z,0)}c.stopPropagation&&b.stopPropagation()},start:function(a){a=a.touches[0];E=a.pageX;F=a.pageY;G=+new Date;A=f=s=void 0;d.addEventListener("touchmove",this,!1);d.addEventListener("touchend",this,!1)},move:function(b){if(!(1<b.touches.length||b.scale&&1!==b.scale)){c.disableScroll&&b.preventDefault();var d=b.touches[0];f=d.pageX-E;A=d.pageY-F;"undefined"==typeof s&&(s=!!(s||Math.abs(f)<Math.abs(A)));s||(b.preventDefault(),r(),c.continuous?(n(i(a-1),f+l[i(a-1)], 0),n(a,f+l[a],0),n(i(a+1),f+l[i(a+1)],0)):(f/=!a&&0<f||a==g.length-1&&0>f?Math.abs(f)/e+1:1,n(a-1,f+l[a-1],0),n(a,f+l[a],0),n(a+1,f+l[a+1],0)))}},end:function(){var b=250>Number(+new Date-G)&&20<Math.abs(f)||Math.abs(f)>e/2,q=!a&&0<f||a==g.length-1&&0>f;c.continuous&&(q=!1);var k=0>f;s||(b&&!q?(k?(c.continuous?(h(i(a-1),-e,0),h(i(a+2),e,0)):h(a-1,-e,0),h(a,l[a]-e,m),h(i(a+1),l[i(a+1)]-e,m),a=i(a+1)):(c.continuous?(h(i(a+1),e,0),h(i(a-2),-e,0)):h(a+1,e,0),h(a,l[a]+e,m),h(i(a-1),l[i(a-1)]+e,m),a=i(a- 1)),c.callback&&c.callback(a,g[a])):c.continuous?(h(i(a-1),-e,m),h(a,0,m),h(i(a+1),e,m)):(h(a-1,-e,m),h(a,0,m),h(a+1,e,m)));d.removeEventListener("touchmove",j,!1);d.removeEventListener("touchend",j,!1)},transitionEnd:function(b){parseInt(b.target.getAttribute("data-index"),10)==a&&(u&&(y=setTimeout(x,u)),c.transitionEnd&&c.transitionEnd.call(b,a,g[a]))}};w();u&&(y=setTimeout(x,u));p.addEventListener?(p.touch&&d.addEventListener("touchstart",j,!1),p.transitions&&(d.addEventListener("webkitTransitionEnd", j,!1),d.addEventListener("msTransitionEnd",j,!1),d.addEventListener("oTransitionEnd",j,!1),d.addEventListener("otransitionend",j,!1),d.addEventListener("transitionend",j,!1)),window.addEventListener("resize",j,!1)):window.onresize=function(){w()};return{setup:function(){w()},slide:function(a,c){r();t(a,c)},prev:function(){r();c.continuous?t(a-1):a&&t(a-1)},next:function(){r();x()},stop:function(){r()},getPos:function(){return a},getNumSlides:function(){return B},kill:function(){r();d.style.width= "";d.style.left="";for(var a=g.length;a--;){var c=g[a];c.style.width="";c.style.left="";p.transitions&&n(a,0,0)}p.addEventListener?(d.removeEventListener("touchstart",j,!1),d.removeEventListener("webkitTransitionEnd",j,!1),d.removeEventListener("msTransitionEnd",j,!1),d.removeEventListener("oTransitionEnd",j,!1),d.removeEventListener("otransitionend",j,!1),d.removeEventListener("transitionend",j,!1),window.removeEventListener("resize",j,!1)):window.onresize=null}}}} if(window.jQuery||window.Zepto)(function(k){k.fn.Swipe=function(c){return this.each(function(){k(this).data("Swipe",new Swipe(k(this)[0],c))})}})(window.jQuery||window.Zepto);